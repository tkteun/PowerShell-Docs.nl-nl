---
title: Resources toevoegen aan een management OData-webservice | Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e620bf6d-76be-47b0-a7a8-f43418f30c60
caps.latest.revision: 6
ms.openlocfilehash: b81a32b867795ae51c3f5308c2f82c31ed2747fa
ms.sourcegitcommit: 52a67bcd9d7bf3e8600ea4302d1fa8970ff9c998
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/15/2019
ms.locfileid: "72352288"
---
# <a name="adding-resources-to-a-management-odata-web-service"></a><span data-ttu-id="ee4db-102">Resources toevoegen aan een Management OData-webservice</span><span class="sxs-lookup"><span data-stu-id="ee4db-102">Adding Resources to a Management OData Web Service</span></span>

<span data-ttu-id="ee4db-103">In dit voor beeld ziet u hoe u een resource kunt toevoegen aan een bestaande Management OData-webservice met behulp van de Management OData-schema ontwerper.</span><span class="sxs-lookup"><span data-stu-id="ee4db-103">This example demonstrates how to add a resource to an existing Management OData web service by using the Management OData Schema Designer.</span></span> <span data-ttu-id="ee4db-104">Het [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) -voor beeld maakt een webservice waarmee het proces en de Server bronnen worden getoond.</span><span class="sxs-lookup"><span data-stu-id="ee4db-104">The [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample creates a web service that exposes the Process and Server resources.</span></span> <span data-ttu-id="ee4db-105">In dit voor beeld voegt u een virtuele machine (VM)-resource toe aan de webservice.</span><span class="sxs-lookup"><span data-stu-id="ee4db-105">In this example, you will add a Virtual Machine (VM) resource to the web service.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ee4db-106">Vereisten</span><span class="sxs-lookup"><span data-stu-id="ee4db-106">Prerequisites</span></span>

<span data-ttu-id="ee4db-107">In dit onderwerp wordt ervan uitgegaan dat u het [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) -voor beeld hebt gedownload en ge誰nstalleerd zoals beschreven in [een Windows Power shell-webservice maken](./creating-a-management-odata-web-service.md)en dat u de [Management OData-schema ontwerper](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner)hebt gedownload en ge誰nstalleerd.</span><span class="sxs-lookup"><span data-stu-id="ee4db-107">This topic assumes that you have downloaded and installed the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample as described in [Creating a Windows PowerShell Web Service](./creating-a-management-odata-web-service.md), and that you have downloaded and installed the [Management OData Schema Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span></span> <span data-ttu-id="ee4db-108">In dit onderwerp wordt ervan uitgegaan dat u de Hyper-V Windows Power shell-module hebt ge誰nstalleerd op de computer waarop u het management Odata-eind punt hebt ingesteld.</span><span class="sxs-lookup"><span data-stu-id="ee4db-108">This topic also assumes that you have the Hyper-V Windows PowerShell module installed on the computer where you set up the Management Odata endpoint.</span></span>

## <a name="adding-vm-as-a-resource-to-the-web-service"></a><span data-ttu-id="ee4db-109">VM als resource toevoegen aan de webservice</span><span class="sxs-lookup"><span data-stu-id="ee4db-109">Adding VM as a Resource to the Web Service</span></span>

<span data-ttu-id="ee4db-110">De eerste stap is het importeren van het schema van het bestaande Management OData-eind punt in de schema ontwerper.</span><span class="sxs-lookup"><span data-stu-id="ee4db-110">The first step is to import the schema from the existing Management OData endpoint into the schema designer.</span></span> <span data-ttu-id="ee4db-111">In de volgende procedure wordt beschreven hoe u dit doet.</span><span class="sxs-lookup"><span data-stu-id="ee4db-111">The following procedure describes how to do that.</span></span>

#### <a name="importing-an-existing-schema-into-the-schema-designer"></a><span data-ttu-id="ee4db-112">Een bestaand schema importeren in de schema ontwerper</span><span class="sxs-lookup"><span data-stu-id="ee4db-112">Importing an existing schema into the schema designer</span></span>

1. <span data-ttu-id="ee4db-113">Open de Management OData-schema ontwerper.</span><span class="sxs-lookup"><span data-stu-id="ee4db-113">Open the Management OData Schema Designer.</span></span>

2. <span data-ttu-id="ee4db-114">Selecteer in het menu **bestand** de optie **bestand** . **Nieuw** ; **Bestand**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-114">From the **File** menu, select **File** ; **New** ; **File**.</span></span> <span data-ttu-id="ee4db-115">Het dialoog venster **nieuw bestand** wordt weer gegeven.</span><span class="sxs-lookup"><span data-stu-id="ee4db-115">The **New File** dialog appears.</span></span>

3. <span data-ttu-id="ee4db-116">Klik op **beheer OData-model**en klik vervolgens op **openen**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-116">Click **Management OData Model**, and then click **Open**.</span></span>

4. <span data-ttu-id="ee4db-117">Met de rechter muisknop in het hoofd venster en klik op **schema bestand** . **Importeren**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-117">Right-click in the main window, and click **Schema file** ; **Import**.</span></span> <span data-ttu-id="ee4db-118">Het dialoog venster **openen** wordt weer gegeven.</span><span class="sxs-lookup"><span data-stu-id="ee4db-118">The **Open** dialog appears.</span></span>

5. <span data-ttu-id="ee4db-119">Navigeer naar de map waarin u de Management OData-webservice voor het [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) -voor beeld hebt ingesteld.</span><span class="sxs-lookup"><span data-stu-id="ee4db-119">Navigate to the folder where you set up the Management OData web service for the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample.</span></span> <span data-ttu-id="ee4db-120">Als u het Windows Power shell-script hebt gebruikt dat bij dat voor beeld is opgegeven om het eind punt in te stellen zonder het script te wijzigen, is de map **C:\inetpub\wwwroot\Modata**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-120">If you used the Windows PowerShell script provided with that sample to set up the endpoint without modifying the script, that folder is **C:\inetpub\wwwroot\Modata**.</span></span> <span data-ttu-id="ee4db-121">Selecteer schema. mof en klik op **openen**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-121">Select Schema.mof, and click **Open**.</span></span>

   <span data-ttu-id="ee4db-122">Open nu het schema. mof-en schema. XML-bestanden in een tekst editor en Let erop dat ze toewijzingen voor het proces en de service resources bevatten.</span><span class="sxs-lookup"><span data-stu-id="ee4db-122">At this point, open the Schema.mof and Schema.xml files in a text editor, and notice that they contain mappings for the Process and Service resources.</span></span> <span data-ttu-id="ee4db-123">Het schema. MOF-bestand maakt gebruik van [Distributed Management Task Force](https://www.dmtf.org/) (DTMF) Managed object (MOF) standaard.</span><span class="sxs-lookup"><span data-stu-id="ee4db-123">The Schema.mof file uses [Distributed Management  Task Force](https://www.dmtf.org/) (DTMF) Managed Object (MOF) standard.</span></span> <span data-ttu-id="ee4db-124">Het schema. XML-bestand maakt gebruik van een XML-schema dat wordt beschreven in het [resource toewijzings schema](./resource-mapping-schema.md).</span><span class="sxs-lookup"><span data-stu-id="ee4db-124">The schema.xml file uses an XML schema that is described in [Resource Mapping Schema](./resource-mapping-schema.md).</span></span>

   <span data-ttu-id="ee4db-125">In de volgende procedure wordt beschreven hoe u Hyper-V-cmdlets in kunt importeren in het schema model.</span><span class="sxs-lookup"><span data-stu-id="ee4db-125">The following procedure describes how to import Hyper-V cmdlets in to the schema model.</span></span>

#### <a name="importing-cmdlets-into-the-schema"></a><span data-ttu-id="ee4db-126">Cmdlets importeren in het schema</span><span class="sxs-lookup"><span data-stu-id="ee4db-126">Importing cmdlets into the schema</span></span>

1. <span data-ttu-id="ee4db-127">Klik met de rechter muisknop op een leeg gebied van het schema Designer-venster en vervolgens op **cmdlets importeren**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-127">Right-click on a blank area of the schema designer window, and click **Import Cmdlets**.</span></span> <span data-ttu-id="ee4db-128">Het dialoog venster wizard voor het **importeren van cmdlets** wordt weer gegeven.</span><span class="sxs-lookup"><span data-stu-id="ee4db-128">The **Cmdlet Import Wizard** dialog appears.</span></span>

2. <span data-ttu-id="ee4db-129">Zorg ervoor dat **lokale computer** is geselecteerd en klik op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-129">Make sure **Local Computer** is selected, and click **Next**.</span></span>

3. <span data-ttu-id="ee4db-130">Zorg ervoor dat ge誰nstalleerde Windows Power shell-modules is geselecteerd en selecteer Hyper-V in de vervolg keuzelijst.</span><span class="sxs-lookup"><span data-stu-id="ee4db-130">Make sure that Installed Windows PowerShell Modules is selected, and select Hyper-V from the drop-down list.</span></span> <span data-ttu-id="ee4db-131">Klik op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-131">click **Next**.</span></span> <span data-ttu-id="ee4db-132">Klik op **Volgende**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-132">Click **Next**.</span></span>

4. <span data-ttu-id="ee4db-133">Selecteer **virtuele machine**in de lijst met **zelfstandig naam woorden** .</span><span class="sxs-lookup"><span data-stu-id="ee4db-133">In the **Cmdlet Noun** list, select **VM**.</span></span> <span data-ttu-id="ee4db-134">Klik op **Volgende**</span><span class="sxs-lookup"><span data-stu-id="ee4db-134">Click **Next**</span></span>

5. <span data-ttu-id="ee4db-135">In dit voor beeld worden alleen de opdrachten Get en DELETE met cmdlets gebonden.</span><span class="sxs-lookup"><span data-stu-id="ee4db-135">For this example, we will bind only the Get and Delete commands with cmdlets.</span></span> <span data-ttu-id="ee4db-136">Schakel de selectie vakjes **maken** en **bijwerken** uit en zorg ervoor dat de selectie vakjes **ophalen** en **verwijderen** zijn ingeschakeld.</span><span class="sxs-lookup"><span data-stu-id="ee4db-136">Clear the **CREATE** and **UPDATE** checkboxes, and make sure the **GET** and **DELETE** checkboxes are checked.</span></span> <span data-ttu-id="ee4db-137">Zorg ervoor dat de cmdlet `Get-VM` is geselecteerd voor **Get**en dat de cmdlet `Remove-VM` is geselecteerd voor **verwijderen**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-137">Make sure that the `Get-VM` cmdlet is selected for **GET**, and the `Remove-VM` cmdlet is selected for **DELETE**.</span></span>

6. <span data-ttu-id="ee4db-138">Omdat de meta gegevens voor de VM-cmdlets geen uitvoer type opgeven, moet u de cmdlet uitvoeren om het uitvoer type op te geven.</span><span class="sxs-lookup"><span data-stu-id="ee4db-138">Because the metadata for the VM cmdlets does not specify an output type, you will need to run the cmdlet to specify the output type.</span></span> <span data-ttu-id="ee4db-139">Selecteer **uitvoer type opgeven** en klik op **cmdlet uitvoeren**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-139">Select **Provide output type** and click **Run cmdlet**.</span></span> <span data-ttu-id="ee4db-140">Het dialoog venster **cmdlet uitvoeren** wordt weer gegeven.</span><span class="sxs-lookup"><span data-stu-id="ee4db-140">The **Run Cmdlet** dialog appears.</span></span> <span data-ttu-id="ee4db-141">Klik op **uitvoeren**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-141">Click **Run**.</span></span> <span data-ttu-id="ee4db-142">Het vak **CLR-type** is ingevuld met het `VirtualMachine`-type.</span><span class="sxs-lookup"><span data-stu-id="ee4db-142">The **CLR Type** box is populated with the `VirtualMachine` type.</span></span> <span data-ttu-id="ee4db-143">Klik op **OK**en vervolgens op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-143">Click **OK**, then click **Next**.</span></span>

7. <span data-ttu-id="ee4db-144">Standaard zijn alle eigenschappen van het object VirtualMachine geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="ee4db-144">By default, all of the properties of the VirtualMachine object are selected.</span></span> <span data-ttu-id="ee4db-145">U kunt alle eigenschappen wissen die u niet wilt als onderdeel van de gegevens die worden geretourneerd wanneer u deze bron aanvraagt bij de webservice.</span><span class="sxs-lookup"><span data-stu-id="ee4db-145">You can clear any properties that you do not want as part of the data returned when you request this resource from the web service.</span></span> <span data-ttu-id="ee4db-146">Klik op **Volgende**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-146">Click **Next**.</span></span>

8. <span data-ttu-id="ee4db-147">U moet ten minste 辿辿n eigenschap selecteren die moet worden gebruikt als sleutel.</span><span class="sxs-lookup"><span data-stu-id="ee4db-147">You must select at least one property to be used as a key.</span></span> <span data-ttu-id="ee4db-148">Selecteer **naam** in de lijst en klik op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-148">Select **Name** in the list, and click **Next**.</span></span>

9. <span data-ttu-id="ee4db-149">In het volgende venster kunt u eigenschappen van de Management OData-resource toewijzen aan eigenschappen van de onderliggende cmdlets.</span><span class="sxs-lookup"><span data-stu-id="ee4db-149">The next window allows you to map properties of the Management OData resource to properties of the underlying cmdlets.</span></span> <span data-ttu-id="ee4db-150">De wizard wijst standaard eigenschappen met identieke namen toe.</span><span class="sxs-lookup"><span data-stu-id="ee4db-150">The wizard maps properties with identical names by default.</span></span> <span data-ttu-id="ee4db-151">Bijvoorbeeld, de eigenschap `ComputerName` van de resource wordt toegewezen aan de eigenschap `ComputerName` van de cmdlets.</span><span class="sxs-lookup"><span data-stu-id="ee4db-151">For example, the `ComputerName` property of the resource is mapped to the `ComputerName` property of the cmdlets.</span></span>  <span data-ttu-id="ee4db-152">Hiermee kunt u de eigenschap `ComputerName` opgeven in een aanvraag voor de webservice en de waarde die u opgeeft, door geven aan de cmdlet `Get-VM`.</span><span class="sxs-lookup"><span data-stu-id="ee4db-152">This allows you to specify the `ComputerName` property in a request to the web service, and have the value you specify be passed to the `Get-VM` cmdlet.</span></span> <span data-ttu-id="ee4db-153">`Id` en `Name` worden standaard ook toegewezen.</span><span class="sxs-lookup"><span data-stu-id="ee4db-153">`Id` and `Name` are also mapped by default.</span></span>

   10. <span data-ttu-id="ee4db-154">Klik op **volgende**en vervolgens op **volt ooien**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-154">Click **Next**, then click **Finish**.</span></span>

       <span data-ttu-id="ee4db-155">De VM-resource wordt nu weer gegeven in het venster schema Designer.</span><span class="sxs-lookup"><span data-stu-id="ee4db-155">The VM resource now appears in the schema designer window.</span></span> <span data-ttu-id="ee4db-156">U kunt de eigenschappen en bewerkingen controleren die zijn gekoppeld aan de resource.</span><span class="sxs-lookup"><span data-stu-id="ee4db-156">You can examine the properties and operations associated with the resource.</span></span> <span data-ttu-id="ee4db-157">Vervolgens exporteert u de bijgewerkte schema bestanden naar de virtuele map voor de webservice.</span><span class="sxs-lookup"><span data-stu-id="ee4db-157">Next, you will export the updated schema files into the virtual directory for the web service.</span></span>

#### <a name="exporting-schema-files-from-the-schema-designer"></a><span data-ttu-id="ee4db-158">Schema bestanden uit de schema ontwerper exporteren</span><span class="sxs-lookup"><span data-stu-id="ee4db-158">Exporting schema files from the schema designer</span></span>

1. <span data-ttu-id="ee4db-159">Klik met de rechter muisknop op een leeg gebied van het schema Designer-venster en op **schema bestand** . **Exporteren**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-159">Right-click on a blank area of the schema designer window, and click **Schema file** ; **Export**.</span></span> <span data-ttu-id="ee4db-160">Het dialoog venster **Opslaan als** wordt weer gegeven.</span><span class="sxs-lookup"><span data-stu-id="ee4db-160">The **Save As** dialog appears.</span></span>

2. <span data-ttu-id="ee4db-161">Ga naar de map waarin u het MOF-bestand hebt ge誰mporteerd.</span><span class="sxs-lookup"><span data-stu-id="ee4db-161">Navigate to the same directory from where you imported the MOF file.</span></span> <span data-ttu-id="ee4db-162">Noem het bestand hetzelfde als het oorspronkelijke MOF-bestand (standaard schema. MOF) en klik op **Opslaan**.</span><span class="sxs-lookup"><span data-stu-id="ee4db-162">Name the file the same as the original MOF file (Schema.mof by default), and click **Save**.</span></span> <span data-ttu-id="ee4db-163">Bevestig dat u het bestaande bestand wilt overschrijven.</span><span class="sxs-lookup"><span data-stu-id="ee4db-163">Confirm that you want to overwrite the existing file.</span></span>

   <span data-ttu-id="ee4db-164">Hoewel het niet expliciet wordt vermeld in het dialoog venster **Opslaan als** , worden zowel de schema. MOF-als de schema. XML-bestanden vervangen.</span><span class="sxs-lookup"><span data-stu-id="ee4db-164">Although it is not explicitly stated in the **Save As** dialog, this replaces both the Schema.mof and Schema.xml files.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ee4db-165">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="ee4db-165">Next Steps</span></span>

<span data-ttu-id="ee4db-166">Voordat u toegang krijgt tot de nieuwe VM-resource van de Management OData-webservice, moet u het RbacConfiguration. XML-bestand bijwerken om toegang te geven tot de Hyper-V Windows Power shell-module, zoals beschreven in [autorisatie op basis van rollen configureren](./configuring-role-based-authorization.md). u kunt ook de webservice moet opnieuw worden gestart.</span><span class="sxs-lookup"><span data-stu-id="ee4db-166">Before you access the new VM resource from the Management OData web service, you must update the RbacConfiguration.xml file to allow access to the Hyper-V Windows PowerShell module as described in [Configuring Role-based Authorization](./configuring-role-based-authorization.md), and you will also need to restart the web service.</span></span>