---
ms.date: 07/10/2019
keywords: JEA, Power shell, beveiliging
title: Beveiligings overwegingen voor JEA
description: Omdat JEA deze gebruikers in staat stelt om beheer opdrachten uit te voeren zonder volledige beheerders toegang, kunt u deze gebruikers vervolgens verwijderen uit beveiligings groepen met hoge bevoegdheden.
ms.openlocfilehash: f65f9d6c6620261de0a9c8de7812637565ca1806
ms.sourcegitcommit: 9080316e3ca4f11d83067b41351531672b667b7a
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 10/24/2020
ms.locfileid: "92501572"
---
# <a name="jea-security-considerations"></a><span data-ttu-id="4e48d-104">Beveiligings overwegingen voor JEA</span><span class="sxs-lookup"><span data-stu-id="4e48d-104">JEA Security Considerations</span></span>

<span data-ttu-id="4e48d-105">JEA helpt u uw beveiligings postuur te verbeteren door het aantal permanente beheerders op uw computers te verminderen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-105">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span> <span data-ttu-id="4e48d-106">JEA maakt gebruik van een Power shell-sessie configuratie voor het maken van een nieuw toegangs punt voor gebruikers om het systeem te beheren.</span><span class="sxs-lookup"><span data-stu-id="4e48d-106">JEA uses a PowerShell session configuration to create a new entry point for users to manage the system.</span></span> <span data-ttu-id="4e48d-107">Gebruikers die een verhoogde bevoegdheden nodig hebben, maar niet onbeperkt, toegang tot de computer om taken uit te voeren, kunnen toegang krijgen tot het JEA-eind punt.</span><span class="sxs-lookup"><span data-stu-id="4e48d-107">Users who need elevated, but not unlimited, access to the machine to do administrative tasks can be granted access to the JEA endpoint.</span></span> <span data-ttu-id="4e48d-108">Omdat JEA deze gebruikers in staat stelt om beheer opdrachten uit te voeren zonder volledige beheerders toegang, kunt u deze gebruikers vervolgens verwijderen uit beveiligings groepen met hoge bevoegdheden.</span><span class="sxs-lookup"><span data-stu-id="4e48d-108">Since JEA allows these users to run admin commands without having full admin access, you can then remove those users from highly privileged security groups.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="4e48d-109">Run-As-account</span><span class="sxs-lookup"><span data-stu-id="4e48d-109">Run-As account</span></span>

<span data-ttu-id="4e48d-110">Elk JEA-eind punt heeft een aangewezen **uitvoeren als-** account.</span><span class="sxs-lookup"><span data-stu-id="4e48d-110">Each JEA endpoint has a designated **run-as** account.</span></span> <span data-ttu-id="4e48d-111">Dit is het account waarmee de acties van de verbinding van de gebruiker worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="4e48d-111">This is the account under which the connecting user's actions are executed.</span></span> <span data-ttu-id="4e48d-112">Dit account kan worden geconfigureerd in het [configuratie bestand](session-configurations.md)voor de sessie en het account dat u kiest, heeft een grote invloed op de beveiliging van uw eind punt.</span><span class="sxs-lookup"><span data-stu-id="4e48d-112">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="4e48d-113">**Virtuele accounts** zijn de aanbevolen manier voor het configureren van het **Run as-** account.</span><span class="sxs-lookup"><span data-stu-id="4e48d-113">**Virtual accounts** are the recommended way of configuring the **run-as** account.</span></span> <span data-ttu-id="4e48d-114">Virtuele accounts zijn eenmalige, tijdelijke lokale accounts die worden gemaakt voor de verbinding die wordt gebruikt tijdens de duur van hun JEA-sessie.</span><span class="sxs-lookup"><span data-stu-id="4e48d-114">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span> <span data-ttu-id="4e48d-115">Zodra de sessie is beëindigd, wordt het virtuele account vernietigd en kan het niet meer worden gebruikt.</span><span class="sxs-lookup"><span data-stu-id="4e48d-115">As soon as their session is terminated, the virtual account is destroyed and can't be used anymore.</span></span> <span data-ttu-id="4e48d-116">De gebruiker die de verbinding maakt, kent de referenties voor het virtuele account niet.</span><span class="sxs-lookup"><span data-stu-id="4e48d-116">The connecting user doesn't know the credentials for the virtual account.</span></span> <span data-ttu-id="4e48d-117">Het virtuele account kan niet worden gebruikt voor toegang tot het systeem via een andere manier als Extern bureaublad of een niet-beperkt Power shell-eind punt.</span><span class="sxs-lookup"><span data-stu-id="4e48d-117">The virtual account can't be used to access the system via other means like Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="4e48d-118">Standaard maken virtuele accounts deel uit van de lokale groep **Administrators** op de computer.</span><span class="sxs-lookup"><span data-stu-id="4e48d-118">By default, virtual accounts belong to the local **Administrators** group on the machine.</span></span> <span data-ttu-id="4e48d-119">Dit geeft hen volledige rechten om alles op het systeem te beheren, maar geen rechten voor het beheren van bronnen in het netwerk.</span><span class="sxs-lookup"><span data-stu-id="4e48d-119">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="4e48d-120">Bij verificatie met andere computers is de gebruikers context die van het lokale computer account, niet het virtuele account.</span><span class="sxs-lookup"><span data-stu-id="4e48d-120">When authenticating with other machines, the user context is that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="4e48d-121">Domein controllers zijn een speciaal geval omdat er geen lokale groep **Administrators** is.</span><span class="sxs-lookup"><span data-stu-id="4e48d-121">Domain controllers are a special case since there isn't a local **Administrators** group.</span></span> <span data-ttu-id="4e48d-122">In plaats daarvan behoren virtuele accounts bij **domein Administrators** en kan de Directory Services op de domein controller beheren.</span><span class="sxs-lookup"><span data-stu-id="4e48d-122">Instead, virtual accounts belong to **Domain Admins** and can manage the directory services on the domain controller.</span></span> <span data-ttu-id="4e48d-123">De domein identiteit is nog steeds beperkt voor gebruik op de domein controller waarop de JEA-sessie is geïnstantieerd.</span><span class="sxs-lookup"><span data-stu-id="4e48d-123">The domain identity is still restricted for use on the domain controller where the JEA session was instantiated.</span></span> <span data-ttu-id="4e48d-124">Alle netwerk toegang lijkt in plaats daarvan te zijn vanaf het computer object van de domein controller.</span><span class="sxs-lookup"><span data-stu-id="4e48d-124">Any network access appears to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="4e48d-125">In beide gevallen kunt u expliciet definiëren tot welke beveiligings groepen het virtuele account behoort.</span><span class="sxs-lookup"><span data-stu-id="4e48d-125">In both cases, you may explicitly define which security groups the virtual account belongs to.</span></span> <span data-ttu-id="4e48d-126">Dit is een goede gewoonte wanneer de taak kan worden uitgevoerd zonder lokale of domein Administrator bevoegdheden.</span><span class="sxs-lookup"><span data-stu-id="4e48d-126">This is a good practice when the task can be done without local or domain admin privileges.</span></span> <span data-ttu-id="4e48d-127">Als u al een beveiligings groep voor uw beheerders hebt gedefinieerd, verleent u het lidmaatschap van de virtuele account aan die groep.</span><span class="sxs-lookup"><span data-stu-id="4e48d-127">If you already have a security group defined for your admins, grant the virtual account membership to that group.</span></span> <span data-ttu-id="4e48d-128">Groepslid maatschap van virtuele accounts is beperkt tot lokale beveiligings groepen op werk stations en lidservers.</span><span class="sxs-lookup"><span data-stu-id="4e48d-128">Virtual account group membership is limited to local security groups on workstation and member servers.</span></span> <span data-ttu-id="4e48d-129">Op domein controllers moeten virtuele accounts lid zijn van domein beveiligings groepen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-129">On domain controllers, virtual accounts must be members of domain security groups.</span></span>
<span data-ttu-id="4e48d-130">Zodra het virtuele account is toegevoegd aan een of meer beveiligings groepen, maakt het niet langer deel uit van de standaard groepen (lokale of domein Administrators).</span><span class="sxs-lookup"><span data-stu-id="4e48d-130">Once the virtual account has been added to one or more security groups, it no longer belongs to the default groups (local or domain admins).</span></span>

<span data-ttu-id="4e48d-131">De volgende tabel bevat een overzicht van de mogelijke configuratie opties en de resulterende machtigingen voor virtuele accounts:</span><span class="sxs-lookup"><span data-stu-id="4e48d-131">The following table summarizes the possible configuration options and resulting permissions for virtual accounts:</span></span>

|        <span data-ttu-id="4e48d-132">Type computer</span><span class="sxs-lookup"><span data-stu-id="4e48d-132">Computer type</span></span>         | <span data-ttu-id="4e48d-133">Configuratie van de virtuele-account groep</span><span class="sxs-lookup"><span data-stu-id="4e48d-133">Virtual account group configuration</span></span> |                   <span data-ttu-id="4e48d-134">Lokale gebruikers context</span><span class="sxs-lookup"><span data-stu-id="4e48d-134">Local user context</span></span>                    | <span data-ttu-id="4e48d-135">Context netwerk gebruikers</span><span class="sxs-lookup"><span data-stu-id="4e48d-135">Network user context</span></span> |
| ---------------------------- | ----------------------------------- | ------------------------------------------------------- | -------------------- |
| <span data-ttu-id="4e48d-136">Domeincontroller</span><span class="sxs-lookup"><span data-stu-id="4e48d-136">Domain controller</span></span>            | <span data-ttu-id="4e48d-137">Standaard</span><span class="sxs-lookup"><span data-stu-id="4e48d-137">Default</span></span>                             | <span data-ttu-id="4e48d-138">Domein gebruiker, lid van*domein*\Domain Administrators</span><span class="sxs-lookup"><span data-stu-id="4e48d-138">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="4e48d-139">Computer account</span><span class="sxs-lookup"><span data-stu-id="4e48d-139">Computer account</span></span>     |
| <span data-ttu-id="4e48d-140">Domeincontroller</span><span class="sxs-lookup"><span data-stu-id="4e48d-140">Domain controller</span></span>            | <span data-ttu-id="4e48d-141">Domein groepen A en B</span><span class="sxs-lookup"><span data-stu-id="4e48d-141">Domain groups A and B</span></span>               | <span data-ttu-id="4e48d-142">Domein gebruiker, lid van*domein*\a,*domein*\b</span><span class="sxs-lookup"><span data-stu-id="4e48d-142">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="4e48d-143">Computer account</span><span class="sxs-lookup"><span data-stu-id="4e48d-143">Computer account</span></span>     |
| <span data-ttu-id="4e48d-144">Lidserver of werk station</span><span class="sxs-lookup"><span data-stu-id="4e48d-144">Member server or workstation</span></span> | <span data-ttu-id="4e48d-145">Standaard</span><span class="sxs-lookup"><span data-stu-id="4e48d-145">Default</span></span>                             | <span data-ttu-id="4e48d-146">Lokale gebruiker, lid van*ingebouwd*\Administrators</span><span class="sxs-lookup"><span data-stu-id="4e48d-146">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="4e48d-147">Computer account</span><span class="sxs-lookup"><span data-stu-id="4e48d-147">Computer account</span></span>     |
| <span data-ttu-id="4e48d-148">Lidserver of werk station</span><span class="sxs-lookup"><span data-stu-id="4e48d-148">Member server or workstation</span></span> | <span data-ttu-id="4e48d-149">Lokale groepen C en D</span><span class="sxs-lookup"><span data-stu-id="4e48d-149">Local groups C and D</span></span>                | <span data-ttu-id="4e48d-150">Lokale gebruiker, lid van*computer*\c en*computer*\d</span><span class="sxs-lookup"><span data-stu-id="4e48d-150">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="4e48d-151">Computer account</span><span class="sxs-lookup"><span data-stu-id="4e48d-151">Computer account</span></span>     |

<span data-ttu-id="4e48d-152">Wanneer u gebeurtenissen voor beveiligings controle en logboeken van toepassingen bekijkt, ziet u dat elke JEA-gebruikers sessie een uniek virtueel account heeft.</span><span class="sxs-lookup"><span data-stu-id="4e48d-152">When you look at security audit events and application event logs, you see that each JEA user session has a unique virtual account.</span></span> <span data-ttu-id="4e48d-153">Dit unieke account helpt u bij het volgen van gebruikers acties in een JEA-eind punt naar de oorspronkelijke gebruiker die de opdracht uitvoert.</span><span class="sxs-lookup"><span data-stu-id="4e48d-153">This unique account helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span> <span data-ttu-id="4e48d-154">Namen van virtuele accounts de notatie volgen `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` als gebruiker **Lisa** in domein **Contoso** een service opnieuw start in een JEA-eind punt, zou de gebruikers naam die aan de service besturings beheer-gebeurtenissen is gekoppeld `WinRM Virtual Users\WinRM_VA_1_contoso_alice` .</span><span class="sxs-lookup"><span data-stu-id="4e48d-154">Virtual account names follow the format `WinRM Virtual Users\WinRM_VA_<ACCOUNTNUMBER>_<DOMAIN>_<sAMAccountName>` For example, if user **Alice** in domain **Contoso** restarts a service in a JEA endpoint, the username associated with any service control manager events would be `WinRM Virtual Users\WinRM_VA_1_contoso_alice`.</span></span>

<span data-ttu-id="4e48d-155">Door een **groep beheerde service accounts (gmsa's)** zijn handig wanneer een lidserver toegang moet hebben tot netwerk bronnen in de JEA-sessie.</span><span class="sxs-lookup"><span data-stu-id="4e48d-155">**Group-managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span> <span data-ttu-id="4e48d-156">Bijvoorbeeld wanneer een JEA-eind punt wordt gebruikt voor het beheren van de toegang tot een REST API-service die op een andere computer wordt gehost.</span><span class="sxs-lookup"><span data-stu-id="4e48d-156">For example, when a JEA endpoint is used to control access to a REST API service hosted on a different machine.</span></span> <span data-ttu-id="4e48d-157">Het is eenvoudig om functies te schrijven voor het aanroepen van de REST-Api's, maar u hebt een netwerk identiteit nodig om te verifiëren met de API.</span><span class="sxs-lookup"><span data-stu-id="4e48d-157">It's easy to write functions to invoke the REST APIs, but you need a network identity to authenticate with the API.</span></span> <span data-ttu-id="4e48d-158">Door een door een groep beheerd service account te gebruiken, wordt de tweede hop mogelijk bij het behoud van de controle over de computers die het account kunnen gebruiken.</span><span class="sxs-lookup"><span data-stu-id="4e48d-158">Using a group-managed service account makes the second hop possible while maintaining control over which computers can use the account.</span></span> <span data-ttu-id="4e48d-159">De efficiënte machtigingen van de gMSA worden gedefinieerd door de beveiligings groepen (lokaal of domein) waartoe het gMSA-account behoort.</span><span class="sxs-lookup"><span data-stu-id="4e48d-159">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="4e48d-160">Wanneer een JEA-eind punt is geconfigureerd voor het gebruik van een gMSA, moeten de acties van alle JEA-gebruikers afkomstig zijn uit dezelfde gMSA.</span><span class="sxs-lookup"><span data-stu-id="4e48d-160">When a JEA endpoint is configured to use a gMSA, the actions of all JEA users appear to come from the same gMSA.</span></span> <span data-ttu-id="4e48d-161">De enige manier om acties terug te sporen naar een specifieke gebruiker is het identificeren van de reeks opdrachten die worden uitgevoerd in een Power shell-sessie transcript.</span><span class="sxs-lookup"><span data-stu-id="4e48d-161">The only way to trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="4e48d-162">**Pass-Through-referenties** worden gebruikt wanneer u geen **uitvoeren als-** account opgeeft.</span><span class="sxs-lookup"><span data-stu-id="4e48d-162">**Pass-thru credentials** are used when you don't specify a **run-as** account.</span></span> <span data-ttu-id="4e48d-163">Power shell gebruikt de referenties van de verbinding van de gebruiker om opdrachten uit te voeren op de externe server.</span><span class="sxs-lookup"><span data-stu-id="4e48d-163">PowerShell uses the connecting user's credential to run commands on the remote server.</span></span> <span data-ttu-id="4e48d-164">Hiervoor moet u de gebruiker rechtstreeks toegang verlenen tot geprivilegieerde beheer groepen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-164">This requires you to grant the connecting user direct access to privileged management groups.</span></span> <span data-ttu-id="4e48d-165">Deze configuratie wordt **niet** aanbevolen voor jea.</span><span class="sxs-lookup"><span data-stu-id="4e48d-165">This configuration is **not** recommended for JEA.</span></span> <span data-ttu-id="4e48d-166">Als de gebruiker die de verbinding maakt, al beheerders bevoegdheden heeft, kan deze het JEA voor komen en het systeem beheren via een andere, onbeperkte manier.</span><span class="sxs-lookup"><span data-stu-id="4e48d-166">If the connecting user already has admin privileges, they can avoid JEA and manage the system via other, unconstrained means.</span></span> <span data-ttu-id="4e48d-167">Zie de sectie hieronder over de manier waarop [JEA geen bescherming biedt tegen beheerders](#jea-doesnt-protect-against-admins)voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="4e48d-167">For more information, see the section below on how [JEA doesn't protect against admins](#jea-doesnt-protect-against-admins).</span></span>

<span data-ttu-id="4e48d-168">Met de **standaard run as-accounts** kunt u elk gebruikers account opgeven waaronder de volledige Power shell-sessie wordt uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="4e48d-168">**Standard run-as accounts** allow you to specify any user account under which the entire PowerShell session runs.</span></span> <span data-ttu-id="4e48d-169">Sessie configuraties die gebruikmaken van vaste **Run-as-** accounts (met de `-RunAsCredential` para meter) zijn niet jea.</span><span class="sxs-lookup"><span data-stu-id="4e48d-169">Session configurations using fixed **run-as** accounts (with the `-RunAsCredential` parameter) aren't JEA-aware.</span></span> <span data-ttu-id="4e48d-170">Roldefinities werken niet meer zoals verwacht.</span><span class="sxs-lookup"><span data-stu-id="4e48d-170">Role definitions no longer function as expected.</span></span> <span data-ttu-id="4e48d-171">Elke gebruiker die gemachtigd is om toegang te krijgen tot het eind punt krijgt dezelfde rol toegewezen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-171">Every user authorized to access the endpoint is assigned the same role.</span></span>

<span data-ttu-id="4e48d-172">U mag geen **RunAsCredential** gebruiken op een JEA-eind punt omdat het lastig is om acties terug te sporen naar specifieke gebruikers en geen ondersteuning voor het toewijzen van gebruikers aan rollen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-172">You shouldn't use a **RunAsCredential** on a JEA endpoint because it's difficult to trace actions back to specific users and lacks support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="4e48d-173">WinRM-eindpunt-ACL</span><span class="sxs-lookup"><span data-stu-id="4e48d-173">WinRM Endpoint ACL</span></span>

<span data-ttu-id="4e48d-174">Net als bij gewone externe Power shell-eind punten heeft elk JEA-eind punt een afzonderlijke toegangs beheer lijst (ACL) die bepaalt wie zich kan verifiëren met het JEA-eind punt.</span><span class="sxs-lookup"><span data-stu-id="4e48d-174">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) that controls who can authenticate with the JEA endpoint.</span></span> <span data-ttu-id="4e48d-175">Bij een onjuiste configuratie kunnen vertrouwde gebruikers geen toegang krijgen tot het JEA-eind punt en kunnen niet-vertrouwde gebruikers toegang hebben.</span><span class="sxs-lookup"><span data-stu-id="4e48d-175">If improperly configured, trusted users may not be able to access the JEA endpoint and untrusted users may have access.</span></span> <span data-ttu-id="4e48d-176">De WinRM-ACL heeft geen invloed op de toewijzing van gebruikers aan JEA-rollen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-176">The WinRM ACL doesn't affect the mapping of users to JEA roles.</span></span> <span data-ttu-id="4e48d-177">Toewijzing wordt bepaald door het veld **RoleDefinitions** in het sessie configuratie bestand dat wordt gebruikt om het eind punt te registreren.</span><span class="sxs-lookup"><span data-stu-id="4e48d-177">Mapping is controlled by the **RoleDefinitions** field in the session configuration file used to register the endpoint.</span></span>

<span data-ttu-id="4e48d-178">Wanneer een JEA-eind punt meerdere functie mogelijkheden heeft, wordt de WinRM-ACL standaard zo geconfigureerd dat toegang tot alle toegewezen gebruikers is toegestaan.</span><span class="sxs-lookup"><span data-stu-id="4e48d-178">By default, when a JEA endpoint has multiple role capabilities, the WinRM ACL is configured to allow access to all mapped users.</span></span> <span data-ttu-id="4e48d-179">Een JEA-sessie die is geconfigureerd met de volgende opdrachten, geeft bijvoorbeeld volledige toegang tot `CONTOSO\JEA_Lev1` en `CONTOSO\JEA_Lev2` .</span><span class="sxs-lookup"><span data-stu-id="4e48d-179">For example, a JEA session configured using the following commands grants full access to `CONTOSO\JEA_Lev1` and `CONTOSO\JEA_Lev2`.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="4e48d-180">U kunt de gebruikers machtigingen controleren met de cmdlet [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) .</span><span class="sxs-lookup"><span data-stu-id="4e48d-180">You can audit user permissions with the [Get-PSSessionConfiguration](/powershell/module/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission
```

```Output
Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="4e48d-181">Als u wilt wijzigen welke gebruikers toegang hebben, voert u een `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` interactieve prompt uit of `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` werkt u de machtigingen bij.</span><span class="sxs-lookup"><span data-stu-id="4e48d-181">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span> <span data-ttu-id="4e48d-182">Gebruikers *hebben ten minste recht op* toegang tot het JEA-eind punt.</span><span class="sxs-lookup"><span data-stu-id="4e48d-182">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="4e48d-183">Het is mogelijk om een JEA-eind punt te maken dat geen gedefinieerde rol toewijst aan elke gebruiker die toegang heeft.</span><span class="sxs-lookup"><span data-stu-id="4e48d-183">It's possible to create a JEA endpoint that doesn't map a defined role to every user that has access.</span></span> <span data-ttu-id="4e48d-184">Deze gebruikers kunnen een JEA-sessie starten, maar hebben alleen toegang tot de standaard-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="4e48d-184">These users can start a JEA session, but only have access to the default cmdlets.</span></span> <span data-ttu-id="4e48d-185">U kunt de gebruikers machtigingen in een JEA-eind punt controleren door uit te voeren `Get-PSSessionCapability` .</span><span class="sxs-lookup"><span data-stu-id="4e48d-185">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span> <span data-ttu-id="4e48d-186">Zie [controle en rapportage op JEA](audit-and-report.md)voor meer informatie.</span><span class="sxs-lookup"><span data-stu-id="4e48d-186">For more information, see [Auditing and Reporting on JEA](audit-and-report.md).</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="4e48d-187">Minimale bevoegdheden rollen</span><span class="sxs-lookup"><span data-stu-id="4e48d-187">Least privilege roles</span></span>

<span data-ttu-id="4e48d-188">Bij het ontwerpen van JEA-rollen is het belang rijk te weten dat de virtuele en groep beheerde service accounts die achter de schermen worden uitgevoerd, onbeperkte toegang hebben tot de lokale computer.</span><span class="sxs-lookup"><span data-stu-id="4e48d-188">When designing JEA roles, it's important to remember that the virtual and group-managed service accounts running behind the scenes can have unrestricted access to the local machine.</span></span> <span data-ttu-id="4e48d-189">Met JEA kunt u de opdrachten en toepassingen beperken die in die geprivilegieerde context kunnen worden uitgevoerd.</span><span class="sxs-lookup"><span data-stu-id="4e48d-189">JEA role capabilities help limit the commands and applications that can be run in that privileged context.</span></span>
<span data-ttu-id="4e48d-190">Onjuist ontworpen rollen kunnen gevaarlijke opdrachten toestaan waardoor een gebruiker de grenzen van de JEA kan verstoren of toegang kan krijgen tot gevoelige informatie.</span><span class="sxs-lookup"><span data-stu-id="4e48d-190">Improperly designed roles can allow dangerous commands that may permit a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="4e48d-191">Denk bijvoorbeeld aan de volgende functie-invoer:</span><span class="sxs-lookup"><span data-stu-id="4e48d-191">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="4e48d-192">Deze functie biedt gebruikers de mogelijkheid om een Power shell-cmdlet uit te voeren met het zelfstandig **proces** uit de module **micro soft. Power shell. Management** .</span><span class="sxs-lookup"><span data-stu-id="4e48d-192">This role capability allows users to run any PowerShell cmdlet with the noun **Process** from the **Microsoft.PowerShell.Management** module.</span></span> <span data-ttu-id="4e48d-193">Gebruikers moeten mogelijk toegang hebben tot cmdlets zoals `Get-Process` om te zien welke toepassingen op het systeem worden uitgevoerd en `Stop-Process` om toepassingen te beëindigen die niet reageren.</span><span class="sxs-lookup"><span data-stu-id="4e48d-193">Users may need to access cmdlets like `Get-Process` to see what applications are running on the system and `Stop-Process` to kill applications that aren't responding.</span></span> <span data-ttu-id="4e48d-194">Deze vermelding kan echter ook `Start-Process` worden gebruikt voor het starten van een wille keurig programma met volledige beheerders machtigingen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-194">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span> <span data-ttu-id="4e48d-195">Het programma hoeft niet lokaal op het systeem te worden geïnstalleerd.</span><span class="sxs-lookup"><span data-stu-id="4e48d-195">The program doesn't need to be installed locally on the system.</span></span> <span data-ttu-id="4e48d-196">Een verbonden gebruiker kan een programma starten van een bestands share die de lokale Administrator bevoegdheden van de gebruiker geeft, malware uitvoert en meer.</span><span class="sxs-lookup"><span data-stu-id="4e48d-196">A connected user could start a program from a file share that gives the user local admin privileges, runs malware, and more.</span></span>

<span data-ttu-id="4e48d-197">Een veiligere versie van dezelfde functie capaciteit zou er als volgt uitzien:</span><span class="sxs-lookup"><span data-stu-id="4e48d-197">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="4e48d-198">Vermijd het gebruik van joker tekens in functie mogelijkheden.</span><span class="sxs-lookup"><span data-stu-id="4e48d-198">Avoid using wildcards in role capabilities.</span></span> <span data-ttu-id="4e48d-199">Zorg ervoor dat u regel matig [effectief gebruikers machtigingen controleert](audit-and-report.md#check-effective-rights-for-a-specific-user) om te begrijpen welke opdrachten toegankelijk zijn voor de gebruiker.</span><span class="sxs-lookup"><span data-stu-id="4e48d-199">Be sure to regularly [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) to understand which commands are accessible to the user.</span></span>

## <a name="jea-doesnt-protect-against-admins"></a><span data-ttu-id="4e48d-200">JEA beschermt niet tegen beheerders</span><span class="sxs-lookup"><span data-stu-id="4e48d-200">JEA doesn't protect against admins</span></span>

<span data-ttu-id="4e48d-201">Een van de kern principes van JEA is dat niet-beheerders een aantal beheer taken kunnen uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="4e48d-201">One of the core principles of JEA is that it allows non-admins to do some admin tasks.</span></span> <span data-ttu-id="4e48d-202">JEA biedt geen bescherming tegen gebruikers die al beheerders bevoegdheden hebben.</span><span class="sxs-lookup"><span data-stu-id="4e48d-202">JEA doesn't protect against users who already have administrator privileges.</span></span> <span data-ttu-id="4e48d-203">Gebruikers die lid zijn van **domein Administrators**, lokale **beheerders**of andere groepen met hoge bevoegdheden, kunnen de beveiliging van JEA via een andere manier omzeilen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-203">Users who belong **Domain Admins**, local **Administrators**, or other highly privileged groups can circumvent JEA's protections via another means.</span></span> <span data-ttu-id="4e48d-204">Ze kunnen zich bijvoorbeeld aanmelden met RDP, externe MMC-consoles gebruiken of verbinding maken met een niet-beperkt Power shell-eind punt.</span><span class="sxs-lookup"><span data-stu-id="4e48d-204">For example, they could sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span> <span data-ttu-id="4e48d-205">Lokale beheerders op een systeem kunnen ook JEA-configuraties wijzigen om extra gebruikers toe te staan of een functie mogelijkheid te wijzigen om het bereik van wat een gebruiker in hun JEA-sessie kan doen, uit te breiden.</span><span class="sxs-lookup"><span data-stu-id="4e48d-205">Also, local admins on a system can modify JEA configurations to allow additional users or change a role capability to extend the scope of what a user can do in their JEA session.</span></span> <span data-ttu-id="4e48d-206">Het is belang rijk om de uitgebreide machtigingen van uw JEA-gebruikers te evalueren om te controleren of er andere manieren zijn om bevoegde toegang tot het systeem te verkrijgen.</span><span class="sxs-lookup"><span data-stu-id="4e48d-206">It's important to evaluate your JEA users' extended permissions to see if there are other ways to gain privileged access to the system.</span></span>

<span data-ttu-id="4e48d-207">Een veelvoorkomende procedure is het gebruik van JEA voor regel matige dagelijkse onderhoud en een just-in-time, Privileged Access Management-oplossing waarmee gebruikers tijdelijk lokale beheerders kunnen worden in nood situaties.</span><span class="sxs-lookup"><span data-stu-id="4e48d-207">A common practice is to use JEA for regular day-to-day maintenance and have a just-in-time, privileged access management solution that allows users to temporarily become local admins in emergency situations.</span></span> <span data-ttu-id="4e48d-208">Dit helpt ervoor te zorgen dat gebruikers geen permanente beheerders zijn op het systeem, maar deze rechten wel kunnen verkrijgen als en alleen wanneer ze een werk stroom volt ooien waarmee hun gebruik van deze machtigingen wordt gedocumenteerd.</span><span class="sxs-lookup"><span data-stu-id="4e48d-208">This helps ensure users aren't permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>
