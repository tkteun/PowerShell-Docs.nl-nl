---
ms.date: 12/12/2018
keywords: DSC, Power shell, configuratie, installatie
title: De LCM configureren in PowerShell 4.0
ms.openlocfilehash: 747b15c483c79a7ecbb62214ef5a59f8dc137bd4
ms.sourcegitcommit: debd2b38fb8070a7357bf1a4bf9cc736f3702f31
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 12/05/2019
ms.locfileid: "71941857"
---
# <a name="configuring-the-lcm-in-powershell-40"></a><span data-ttu-id="a3003-103">De LCM configureren in PowerShell 4.0</span><span class="sxs-lookup"><span data-stu-id="a3003-103">Configuring the LCM in PowerShell 4.0</span></span>

><span data-ttu-id="a3003-104">Van toepassing op: Windows Power Shell 4,0</span><span class="sxs-lookup"><span data-stu-id="a3003-104">Applies To: Windows PowerShell 4.0</span></span>

<span data-ttu-id="a3003-105">**Zie [Configuring the Local Configuration Manager](metaConfig.md)(Engelstalig) voor informatie over Windows power shell 5,0 en hoger.**</span><span class="sxs-lookup"><span data-stu-id="a3003-105">**For information related to Windows PowerShell 5.0 and later, see [Configuring the Local Configuration Manager](metaConfig.md).**</span></span>

<span data-ttu-id="a3003-106">Local Configuration Manager is de Windows Power shell-engine voor desired state Configuration (DSC).</span><span class="sxs-lookup"><span data-stu-id="a3003-106">Local Configuration Manager is the Windows PowerShell Desired State Configuration (DSC) engine.</span></span>
<span data-ttu-id="a3003-107">Het wordt uitgevoerd op alle doel knooppunten en is verantwoordelijk voor het aanroepen van de configuratie resources die zijn opgenomen in een DSC-configuratie script.</span><span class="sxs-lookup"><span data-stu-id="a3003-107">It runs on all target nodes, and it is responsible for calling the configuration resources that are included in a DSC configuration script.</span></span>
<span data-ttu-id="a3003-108">In dit onderwerp vindt u de eigenschappen van lokale Configuration Manager en wordt beschreven hoe u de lokale Configuration Manager-instellingen op een doel knooppunt kunt wijzigen.</span><span class="sxs-lookup"><span data-stu-id="a3003-108">This topic lists the properties of Local Configuration Manager and describes how you can modify the Local Configuration Manager settings on a target node.</span></span>

## <a name="local-configuration-manager-properties"></a><span data-ttu-id="a3003-109">Eigenschappen van lokale Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="a3003-109">Local Configuration Manager properties</span></span>

<span data-ttu-id="a3003-110">Hieronder vindt u de lokale Configuration Manager eigenschappen die u kunt instellen of ophalen.</span><span class="sxs-lookup"><span data-stu-id="a3003-110">The following lists the Local Configuration Manager properties that you can set or retrieve.</span></span>

- <span data-ttu-id="a3003-111">**AllowModuleOverwrite**: bepaalt of nieuwe configuraties die worden gedownload van de configuratie service, de oude kunnen overschrijven op het doel knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a3003-111">**AllowModuleOverwrite**: Controls whether new configurations downloaded from the configuration service are allowed to overwrite the old ones on the target node.</span></span> <span data-ttu-id="a3003-112">Mogelijke waarden zijn True en False.</span><span class="sxs-lookup"><span data-stu-id="a3003-112">Possible values are True and False.</span></span>
- <span data-ttu-id="a3003-113">**CertificateID**: de vinger afdruk van een certificaat dat wordt gebruikt voor het beveiligen van referenties die in een configuratie zijn door gegeven.</span><span class="sxs-lookup"><span data-stu-id="a3003-113">**CertificateID**: The thumbprint of a certificate used to secure credentials passed in a configuration.</span></span> <span data-ttu-id="a3003-114">Zie voor meer informatie [referenties beveiligen in Windows Power shell desired state Configuration](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/)(Engelstalig).</span><span class="sxs-lookup"><span data-stu-id="a3003-114">For more information see [Want to secure credentials in Windows PowerShell Desired State Configuration?](https://blogs.msdn.microsoft.com/powershell/2014/01/31/want-to-secure-credentials-in-windows-powershell-desired-state-configuration/).</span></span>
- <span data-ttu-id="a3003-115">**ConfigurationID**: geeft een GUID aan die wordt gebruikt om een bepaald configuratie bestand van een pull-service op te halen.</span><span class="sxs-lookup"><span data-stu-id="a3003-115">**ConfigurationID**: Indicates a GUID which is used to get a particular configuration file from a pull service.</span></span> <span data-ttu-id="a3003-116">De GUID zorgt ervoor dat het juiste configuratie bestand wordt geopend.</span><span class="sxs-lookup"><span data-stu-id="a3003-116">The GUID ensures that the correct configuration file is accessed.</span></span>
- <span data-ttu-id="a3003-117">**ConfigurationMode**: Hiermee geeft u op hoe de lokale Configuration Manager de configuratie werkelijk toepast op de doel knooppunten.</span><span class="sxs-lookup"><span data-stu-id="a3003-117">**ConfigurationMode**: Specifies how the Local Configuration Manager actually applies the configuration to the target nodes.</span></span> <span data-ttu-id="a3003-118">Dit kan de volgende waarden hebben:</span><span class="sxs-lookup"><span data-stu-id="a3003-118">It can take the following values:</span></span>
  - <span data-ttu-id="a3003-119">**ApplyOnly**: met deze optie wordt de configuratie door DSC toegepast en gebeurt er niets meer tenzij er een nieuwe configuratie wordt gedetecteerd, hetzij door u rechtstreeks een nieuwe configuratie naar het doel knooppunt te sturen of als u verbinding maakt met een pull-service en DSC een nieuwe configuratie detecteert wanneer deze de pull-service controleert.</span><span class="sxs-lookup"><span data-stu-id="a3003-119">**ApplyOnly**: With this option, DSC applies the configuration and does nothing further unless a new configuration is detected, either by you sending a new configuration directly to the target node or if you are connecting to a pull service and DSC discovers a new configuration when it checks with the pull service.</span></span> <span data-ttu-id="a3003-120">Als de configuratie drift van het doel knooppunt, wordt er geen actie ondernomen.</span><span class="sxs-lookup"><span data-stu-id="a3003-120">If the target node's configuration drifts, no action is taken.</span></span>
  - <span data-ttu-id="a3003-121">**ApplyAndMonitor**: met deze optie (dit is de standaard instelling), past DSC nieuwe configuraties toe, ongeacht of deze rechtstreeks naar het doel knooppunt zijn verzonden of op een pull-service zijn gevonden.</span><span class="sxs-lookup"><span data-stu-id="a3003-121">**ApplyAndMonitor**: With this option (which is the default), DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="a3003-122">Als de configuratie van het doel knooppunt van het configuratie bestand is, wordt de discrepantie in de logboeken door DSC gerapporteerd.</span><span class="sxs-lookup"><span data-stu-id="a3003-122">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs.</span></span> <span data-ttu-id="a3003-123">Zie voor meer informatie over DSC-logboek registratie [gebeurtenis Logboeken gebruiken om fouten in de gewenste status configuratie te onderzoeken](https://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span><span class="sxs-lookup"><span data-stu-id="a3003-123">For more about DSC logging, see [Using Event Logs to Diagnose Errors in Desired State Configuration](https://blogs.msdn.com/b/powershell/archive/2014/01/03/using-event-logs-to-diagnose-errors-in-desired-state-configuration.aspx).</span></span>
  - <span data-ttu-id="a3003-124">**ApplyAndAutoCorrect**: met deze optie past DSC nieuwe configuraties toe, ongeacht of deze rechtstreeks naar het doel knooppunt zijn verzonden of op een pull-service zijn gedetecteerd.</span><span class="sxs-lookup"><span data-stu-id="a3003-124">**ApplyAndAutoCorrect**: With this option, DSC applies any new configurations, whether sent by you directly to the target node or discovered on a pull service.</span></span> <span data-ttu-id="a3003-125">Als de configuratie van het doel knooppunt van het configuratie bestand wordt opgehaald, wordt de discrepantie in Logboeken door DSC gerapporteerd en wordt vervolgens geprobeerd de configuratie van het doel knooppunt aan te passen om de compatibiliteit met het configuratie bestand te verg Roten.</span><span class="sxs-lookup"><span data-stu-id="a3003-125">Thereafter, if the configuration of the target node drifts from the configuration file, DSC reports the discrepancy in logs, and then attempts to adjust the target node configuration to bring in compliance with the configuration file.</span></span>
- <span data-ttu-id="a3003-126">**ConfigurationModeFrequencyMins**: vertegenwoordigt de frequentie (in minuten) waarmee de achtergrond toepassing van DSC probeert de huidige configuratie op het doel knooppunt te implementeren.</span><span class="sxs-lookup"><span data-stu-id="a3003-126">**ConfigurationModeFrequencyMins**: Represents the frequency (in minutes) at which the background application of DSC attempts to implement the current configuration on the target node.</span></span> <span data-ttu-id="a3003-127">De standaard waarde is 15.</span><span class="sxs-lookup"><span data-stu-id="a3003-127">The default value is 15.</span></span> <span data-ttu-id="a3003-128">Deze waarde kan worden ingesteld in combi natie met RefreshMode.</span><span class="sxs-lookup"><span data-stu-id="a3003-128">This value can be set in conjunction with RefreshMode.</span></span> <span data-ttu-id="a3003-129">Wanneer RefreshMode is ingesteld op PULL, neemt het doel knooppunt contact op met de configuratie service met een interval dat is ingesteld door RefreshFrequencyMins en downloadt de huidige configuratie.</span><span class="sxs-lookup"><span data-stu-id="a3003-129">When RefreshMode is set to PULL, the target node contacts the configuration service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="a3003-130">Ongeacht de waarde van RefreshMode, op basis van het interval dat door ConfigurationModeFrequencyMins is ingesteld, past de consistentie-engine de meest recente configuratie toe die is gedownload naar het doel knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a3003-130">Regardless of the RefreshMode value, at the interval set by ConfigurationModeFrequencyMins, the consistency engine applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="a3003-131">RefreshFrequencyMins moet worden ingesteld op een veelvoud van een geheel getal van ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="a3003-131">RefreshFrequencyMins should be set to an integer multiple of ConfigurationModeFrequencyMins.</span></span>
- <span data-ttu-id="a3003-132">**Referentie**: geeft referenties aan (net als bij Get-Credential) die zijn vereist voor toegang tot externe bronnen, zoals om contact op te nemen met de configuratie service.</span><span class="sxs-lookup"><span data-stu-id="a3003-132">**Credential**: Indicates credentials (as with Get-Credential) required to access remote resources, such as to contact the configuration service.</span></span>
- <span data-ttu-id="a3003-133">**DownloadManagerCustomData**: vertegenwoordigt een matrix die aangepaste gegevens bevat die specifiek zijn voor het Download beheer.</span><span class="sxs-lookup"><span data-stu-id="a3003-133">**DownloadManagerCustomData**: Represents an array that contains custom data specific to the download manager.</span></span>
- <span data-ttu-id="a3003-134">**DownloadManagerName**: geeft de naam aan van de configuratie-en module Download beheer.</span><span class="sxs-lookup"><span data-stu-id="a3003-134">**DownloadManagerName**: Indicates the name of the configuration and module download manager.</span></span>
- <span data-ttu-id="a3003-135">**RebootNodeIfNeeded**: Stel dit in op `$true` zodat resources het knoop punt opnieuw kunnen opstarten met behulp van de `$global:DSCMachineStatus` vlag.</span><span class="sxs-lookup"><span data-stu-id="a3003-135">**RebootNodeIfNeeded**: Set this to `$true` to allow resources to reboot the Node using the `$global:DSCMachineStatus` flag.</span></span> <span data-ttu-id="a3003-136">Als dat niet het geval is, moet u het knoop punt hand matig opnieuw opstarten voor een configuratie waarvoor deze vereist is.</span><span class="sxs-lookup"><span data-stu-id="a3003-136">Otherwise, you will have to manually reboot the node for any configuration that requires it.</span></span> <span data-ttu-id="a3003-137">De standaardwaarde is `$false`.</span><span class="sxs-lookup"><span data-stu-id="a3003-137">The default value is `$false`.</span></span> <span data-ttu-id="a3003-138">Als u deze instelling wilt gebruiken wanneer een voor waarde voor opnieuw opstarten wordt aangenomen door iets anders dan DSC (zoals Windows Installer), moet u deze instelling combi neren met de module [xPendingReboot](https://github.com/powershell/xpendingreboot) .</span><span class="sxs-lookup"><span data-stu-id="a3003-138">To use this setting when a reboot condition is enacted by something other than DSC (such as Windows Installer), combine this setting with the [xPendingReboot](https://github.com/powershell/xpendingreboot) module.</span></span>
- <span data-ttu-id="a3003-139">**RefreshFrequencyMins**: wordt gebruikt wanneer u een pull-service hebt ingesteld.</span><span class="sxs-lookup"><span data-stu-id="a3003-139">**RefreshFrequencyMins**: Used when you have set up a pull service.</span></span> <span data-ttu-id="a3003-140">Vertegenwoordigt de frequentie (in minuten) waarmee de lokale Configuration Manager contact opneemt met een pull-service om de huidige configuratie te downloaden.</span><span class="sxs-lookup"><span data-stu-id="a3003-140">Represents the frequency (in minutes) at which the Local Configuration Manager contacts a pull service to download the current configuration.</span></span> <span data-ttu-id="a3003-141">Deze waarde kan worden ingesteld in combi natie met ConfigurationModeFrequencyMins.</span><span class="sxs-lookup"><span data-stu-id="a3003-141">This value can be set in conjunction with ConfigurationModeFrequencyMins.</span></span> <span data-ttu-id="a3003-142">Wanneer RefreshMode is ingesteld op PULL, neemt het doel knooppunt contact op met de pull-service met een interval dat is ingesteld door RefreshFrequencyMins en downloadt de huidige configuratie.</span><span class="sxs-lookup"><span data-stu-id="a3003-142">When RefreshMode is set to PULL, the target node contacts the pull service at an interval set by RefreshFrequencyMins and downloads the current configuration.</span></span> <span data-ttu-id="a3003-143">Op basis van het interval dat is ingesteld door ConfigurationModeFrequencyMins, past de consistentie-engine de meest recente configuratie toe die is gedownload naar het doel knooppunt.</span><span class="sxs-lookup"><span data-stu-id="a3003-143">At the interval set by ConfigurationModeFrequencyMins, the consistency engine then applies the latest configuration that was downloaded to the target node.</span></span> <span data-ttu-id="a3003-144">Als RefreshFrequencyMins niet is ingesteld op een veelvoud van een geheel getal van ConfigurationModeFrequencyMins, wordt het door het systeem afgerond.</span><span class="sxs-lookup"><span data-stu-id="a3003-144">If RefreshFrequencyMins is not set to an integer multiple of ConfigurationModeFrequencyMins, the system will round it up.</span></span> <span data-ttu-id="a3003-145">De standaardwaarde is 30.</span><span class="sxs-lookup"><span data-stu-id="a3003-145">The default value is 30.</span></span>
- <span data-ttu-id="a3003-146">**RefreshMode**: mogelijke waarden zijn **Push** (de standaard instelling) en **pull**.</span><span class="sxs-lookup"><span data-stu-id="a3003-146">**RefreshMode**: Possible values are **Push** (the default) and **Pull**.</span></span> <span data-ttu-id="a3003-147">In de configuratie ' push ' moet u een configuratie bestand op elk doel knooppunt plaatsen met behulp van elke client computer.</span><span class="sxs-lookup"><span data-stu-id="a3003-147">In the "push" configuration, you must place a configuration file on each target node, using any client computer.</span></span> <span data-ttu-id="a3003-148">In de pull-modus moet u een pull-service voor lokale Configuration Manager instellen om contact op te nemen met de configuratie bestanden en deze te openen.</span><span class="sxs-lookup"><span data-stu-id="a3003-148">In the "pull" mode, you must set up a pull service for Local Configuration Manager to contact and access the configuration files.</span></span>

> [!NOTE]
> <span data-ttu-id="a3003-149">De LCM start de **ConfigurationModeFrequencyMins** -cyclus op basis van:</span><span class="sxs-lookup"><span data-stu-id="a3003-149">The LCM starts the **ConfigurationModeFrequencyMins** cycle based on:</span></span>
>
> - <span data-ttu-id="a3003-150">Er wordt een nieuwe configuratie toegepast met `Set-DscLocalConfigurationManager`</span><span class="sxs-lookup"><span data-stu-id="a3003-150">A new metaconfig is applied using `Set-DscLocalConfigurationManager`</span></span>
> - <span data-ttu-id="a3003-151">Een computer opnieuw opstarten</span><span class="sxs-lookup"><span data-stu-id="a3003-151">A machine restart</span></span>
>
> <span data-ttu-id="a3003-152">Voor elke voor waarde waarbij het timer proces vastloopt, wordt dit binnen 30 seconden gedetecteerd en wordt de cyclus opnieuw gestart.</span><span class="sxs-lookup"><span data-stu-id="a3003-152">For any condition where the timer process experiences a crash, that will be detected within 30 seconds and the cycle will be restarted.</span></span>
> <span data-ttu-id="a3003-153">Een gelijktijdige bewerking kan ertoe leiden dat de cyclus wordt gestart. als de duur van deze bewerking de geconfigureerde cyclus frequentie overschrijdt, wordt de volgende timer niet gestart.</span><span class="sxs-lookup"><span data-stu-id="a3003-153">A concurrent operation could delay the cycle from being started, if the duration of this operation exceeds the configured cycle frequency, the next timer will not start.</span></span>
>
> <span data-ttu-id="a3003-154">Voor beeld: de configuratie van de instellingen van een pull-interval van vijf tien minuten en een pull vindt plaats in T1.</span><span class="sxs-lookup"><span data-stu-id="a3003-154">Example, the metaconfig is configured at a 15 minute pull frequency and a pull occurs at T1.</span></span>  <span data-ttu-id="a3003-155">Het knoop punt is 16 minuten niet voltooid.</span><span class="sxs-lookup"><span data-stu-id="a3003-155">The Node does not finish work for 16 minutes.</span></span>  <span data-ttu-id="a3003-156">De eerste vijf tien minuten wordt genegeerd en de volgende pull-bewerking wordt uitgevoerd op T1 + 15 + 15.</span><span class="sxs-lookup"><span data-stu-id="a3003-156">The first 15 minute cycle is ignored, and next pull will happen at T1+15+15.</span></span>

### <a name="example-of-updating-local-configuration-manager-settings"></a><span data-ttu-id="a3003-157">Voor beeld van het bijwerken van de instellingen van lokale Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="a3003-157">Example of updating Local Configuration Manager settings</span></span>

<span data-ttu-id="a3003-158">U kunt de lokale Configuration Manager instellingen van een doel knooppunt bijwerken door een **LocalConfigurationManager** -blok in het knooppunt blok op te nemen in een configuratie script, zoals in het volgende voor beeld wordt weer gegeven.</span><span class="sxs-lookup"><span data-stu-id="a3003-158">You can update the Local Configuration Manager settings of a target node by including a **LocalConfigurationManager** block inside the node block in a configuration script, as shown in the following example.</span></span>

```powershell
Configuration ExampleConfig
{
    Node "Server001"
    {
        LocalConfigurationManager
        {
            ConfigurationID = "646e48cb-3082-4a12-9fd9-f71b9a562d4e"
            ConfigurationModeFrequencyMins = 45
            ConfigurationMode = "ApplyAndAutocorrect"
            RefreshMode = "Pull"
            RefreshFrequencyMins = 90
            DownloadManagerName = "WebDownloadManager"
            DownloadManagerCustomData = (@{ServerUrl="https://$PullService/psdscpullserver.svc"})
            CertificateID = "71AA68562316FE3F73536F1096B85D66289ED60E"
            Credential = $cred
            RebootNodeIfNeeded = $true
            AllowModuleOverwrite = $false
        }
# One or more resource blocks can be added here
    }
}

# The following line invokes the configuration and creates a file called Server001.meta.mof at the specified path
ExampleConfig -OutputPath "c:\users\public\dsc"
```

<span data-ttu-id="a3003-159">Als u het script uitvoert in het vorige voor beeld, wordt een MOF-bestand gegenereerd dat de gewenste instellingen opgeeft en opslaat.</span><span class="sxs-lookup"><span data-stu-id="a3003-159">Running the script in the previous example generates a MOF file that specifies and stores the desired settings.</span></span>
<span data-ttu-id="a3003-160">Als u de instellingen wilt Toep assen, kunt u de cmdlet **set-DscLocalConfigurationManager** gebruiken, zoals wordt weer gegeven in het volgende voor beeld.</span><span class="sxs-lookup"><span data-stu-id="a3003-160">To apply the settings, you can use the **Set-DscLocalConfigurationManager** cmdlet, as shown in the following example.</span></span>

```powershell
Set-DscLocalConfigurationManager -Path "c:\users\public\dsc"
```

> [!NOTE]
> <span data-ttu-id="a3003-161">Voor de para meter **Path** moet u hetzelfde pad opgeven dat u hebt opgegeven voor de para meter **OutputPath** wanneer u de configuratie in het vorige voor beeld aanroept.</span><span class="sxs-lookup"><span data-stu-id="a3003-161">For the **Path** parameter, you must specify the same path that you specified for the **OutputPath** parameter when you invoked the configuration in the previous example.</span></span>

<span data-ttu-id="a3003-162">Als u de huidige instellingen voor lokale Configuration Manager wilt zien, kunt u de cmdlet **Get-DscLocalConfigurationManager** gebruiken.</span><span class="sxs-lookup"><span data-stu-id="a3003-162">To see the current Local Configuration Manager settings, you can use the **Get-DscLocalConfigurationManager** cmdlet.</span></span>
<span data-ttu-id="a3003-163">Als u deze cmdlet zonder para meters aanroept, worden standaard de lokale Configuration Manager-instellingen opgehaald voor het knoop punt waarop u het uitvoert.</span><span class="sxs-lookup"><span data-stu-id="a3003-163">If you invoke this cmdlet with no parameters, by default it will get the Local Configuration Manager settings for the node on which you run it.</span></span>
<span data-ttu-id="a3003-164">Als u een ander knoop punt wilt opgeven, gebruikt u de para meter **CimSession** met deze cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a3003-164">To specify another node, use the **CimSession** parameter with this cmdlet.</span></span>
