---
title: Toevoegen van Resources aan een Management OData-webservice | Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e620bf6d-76be-47b0-a7a8-f43418f30c60
caps.latest.revision: 6
ms.openlocfilehash: b81a32b867795ae51c3f5308c2f82c31ed2747fa
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 02/03/2019
ms.locfileid: "56848466"
---
# <a name="adding-resources-to-a-management-odata-web-service"></a><span data-ttu-id="16be3-102">Resources toevoegen aan een Management OData-webservice</span><span class="sxs-lookup"><span data-stu-id="16be3-102">Adding Resources to a Management OData Web Service</span></span>

<span data-ttu-id="16be3-103">In dit voorbeeld ziet u hoe u een resource toevoegen aan een bestaande Management OData-webservice met behulp van de ontwerpfunctie voor Management OData-Schema's.</span><span class="sxs-lookup"><span data-stu-id="16be3-103">This example demonstrates how to add a resource to an existing Management OData web service by using the Management OData Schema Designer.</span></span> <span data-ttu-id="16be3-104">De [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) maakt u een webservice die wordt aangegeven dat de proces- en serverbronnen.</span><span class="sxs-lookup"><span data-stu-id="16be3-104">The [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample creates a web service that exposes the Process and Server resources.</span></span> <span data-ttu-id="16be3-105">In dit voorbeeld voegt u een virtuele Machine (VM)-resource met de webservice.</span><span class="sxs-lookup"><span data-stu-id="16be3-105">In this example, you will add a Virtual Machine (VM) resource to the web service.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="16be3-106">Vereisten</span><span class="sxs-lookup"><span data-stu-id="16be3-106">Prerequisites</span></span>

<span data-ttu-id="16be3-107">In dit artikel wordt ervan uitgegaan dat u hebt gedownload en geïnstalleerd de [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) zoals beschreven in voorbeeld [het maken van een Windows PowerShell-webservice](./creating-a-management-odata-web-service.md), en die u hebt gedownload en geïnstalleerd de [Management OData-Schema Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span><span class="sxs-lookup"><span data-stu-id="16be3-107">This topic assumes that you have downloaded and installed the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample as described in [Creating a Windows PowerShell Web Service](./creating-a-management-odata-web-service.md), and that you have downloaded and installed the [Management OData Schema Designer](https://marketplace.visualstudio.com/items?itemName=jlisc0.ManagementODataSchemaDesigner).</span></span> <span data-ttu-id="16be3-108">In dit onderwerp wordt ook van uitgegaan dat u hebt de Hyper-V Windows PowerShell-module geïnstalleerd op de computer waar u het beheer van Odata-eindpunt instellen.</span><span class="sxs-lookup"><span data-stu-id="16be3-108">This topic also assumes that you have the Hyper-V Windows PowerShell module installed on the computer where you set up the Management Odata endpoint.</span></span>

## <a name="adding-vm-as-a-resource-to-the-web-service"></a><span data-ttu-id="16be3-109">Virtuele machine toe te voegen als een Resource met de webservice</span><span class="sxs-lookup"><span data-stu-id="16be3-109">Adding VM as a Resource to the Web Service</span></span>

<span data-ttu-id="16be3-110">De eerste stap is het schema van de bestaande Management OData-eindpunt in de ontwerpfunctie voor schema's importeren.</span><span class="sxs-lookup"><span data-stu-id="16be3-110">The first step is to import the schema from the existing Management OData endpoint into the schema designer.</span></span> <span data-ttu-id="16be3-111">De volgende procedure wordt beschreven hoe u dat doet.</span><span class="sxs-lookup"><span data-stu-id="16be3-111">The following procedure describes how to do that.</span></span>

#### <a name="importing-an-existing-schema-into-the-schema-designer"></a><span data-ttu-id="16be3-112">Importeren van een bestaand schema in de ontwerpfunctie voor schema</span><span class="sxs-lookup"><span data-stu-id="16be3-112">Importing an existing schema into the schema designer</span></span>

1. <span data-ttu-id="16be3-113">Open de ontwerpfunctie voor Management OData-Schema.</span><span class="sxs-lookup"><span data-stu-id="16be3-113">Open the Management OData Schema Designer.</span></span>

2. <span data-ttu-id="16be3-114">Uit de **bestand** in het menu **bestand** ; **Nieuwe** ; **Bestand**.</span><span class="sxs-lookup"><span data-stu-id="16be3-114">From the **File** menu, select **File** ; **New** ; **File**.</span></span> <span data-ttu-id="16be3-115">De **nieuw bestand** dialoogvenster wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="16be3-115">The **New File** dialog appears.</span></span>

3. <span data-ttu-id="16be3-116">Klik op **Management OData-Model**, en klik vervolgens op **Open**.</span><span class="sxs-lookup"><span data-stu-id="16be3-116">Click **Management OData Model**, and then click **Open**.</span></span>

4. <span data-ttu-id="16be3-117">Met de rechtermuisknop in het hoofdvenster en klikt u op **schemabestand** ; **Importeren**.</span><span class="sxs-lookup"><span data-stu-id="16be3-117">Right-click in the main window, and click **Schema file** ; **Import**.</span></span> <span data-ttu-id="16be3-118">De **Open** dialoogvenster wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="16be3-118">The **Open** dialog appears.</span></span>

5. <span data-ttu-id="16be3-119">Navigeer naar de map waarin u instellen om het beheer van OData-webservice voor de [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) voorbeeld.</span><span class="sxs-lookup"><span data-stu-id="16be3-119">Navigate to the folder where you set up the Management OData web service for the [PswsRoleBasedPlugins](https://code.msdn.microsoft.com:443/windowsdesktop/PswsRoleBasedPlugins-9c79b75a) sample.</span></span> <span data-ttu-id="16be3-120">Als u de Windows PowerShell-script dat bij dat voorbeeld gebruikt het instellen van het eindpunt zonder te wijzigen van het script, wordt die map **C:\inetpub\wwwroot\Modata**.</span><span class="sxs-lookup"><span data-stu-id="16be3-120">If you used the Windows PowerShell script provided with that sample to set up the endpoint without modifying the script, that folder is **C:\inetpub\wwwroot\Modata**.</span></span> <span data-ttu-id="16be3-121">Selecteer Schema.mof en op **Open**.</span><span class="sxs-lookup"><span data-stu-id="16be3-121">Select Schema.mof, and click **Open**.</span></span>

   <span data-ttu-id="16be3-122">Op dit moment de Schema.mof en Schema.xml-bestanden in een teksteditor te openen en u ziet dat ze toewijzingen voor de proces- en Service-resources bevatten.</span><span class="sxs-lookup"><span data-stu-id="16be3-122">At this point, open the Schema.mof and Schema.xml files in a text editor, and notice that they contain mappings for the Process and Service resources.</span></span> <span data-ttu-id="16be3-123">Maakt gebruik van het bestand Schema.mof [Distributed Management Task Force](https://www.dmtf.org/) (DTMF) beheerde Object (MOF) standaard.</span><span class="sxs-lookup"><span data-stu-id="16be3-123">The Schema.mof file uses [Distributed Management  Task Force](https://www.dmtf.org/) (DTMF) Managed Object (MOF) standard.</span></span> <span data-ttu-id="16be3-124">Het bestand schema.xml maakt gebruik van een XML-schema dat wordt beschreven in [Resource toewijzen Schema](./resource-mapping-schema.md).</span><span class="sxs-lookup"><span data-stu-id="16be3-124">The schema.xml file uses an XML schema that is described in [Resource Mapping Schema](./resource-mapping-schema.md).</span></span>

   <span data-ttu-id="16be3-125">De volgende procedure wordt beschreven hoe u Hyper-V-cmdlets in importeren naar de schema-model.</span><span class="sxs-lookup"><span data-stu-id="16be3-125">The following procedure describes how to import Hyper-V cmdlets in to the schema model.</span></span>

#### <a name="importing-cmdlets-into-the-schema"></a><span data-ttu-id="16be3-126">Cmdlets importeren in het schema</span><span class="sxs-lookup"><span data-stu-id="16be3-126">Importing cmdlets into the schema</span></span>

1. <span data-ttu-id="16be3-127">Met de rechtermuisknop op een leeg gebied in het ontwerpfunctievenster schema, en klikt u op **Cmdlets voor importeren**.</span><span class="sxs-lookup"><span data-stu-id="16be3-127">Right-click on a blank area of the schema designer window, and click **Import Cmdlets**.</span></span> <span data-ttu-id="16be3-128">De **Cmdlet Import-Wizard** dialoogvenster wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="16be3-128">The **Cmdlet Import Wizard** dialog appears.</span></span>

2. <span data-ttu-id="16be3-129">Zorg ervoor dat **lokale Computer** is geselecteerd en klik op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="16be3-129">Make sure **Local Computer** is selected, and click **Next**.</span></span>

3. <span data-ttu-id="16be3-130">Zorg ervoor dat Windows PowerShell-Modules geïnstalleerd is geselecteerd en selecteer Hyper-V in de vervolgkeuzelijst.</span><span class="sxs-lookup"><span data-stu-id="16be3-130">Make sure that Installed Windows PowerShell Modules is selected, and select Hyper-V from the drop-down list.</span></span> <span data-ttu-id="16be3-131">Klik op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="16be3-131">click **Next**.</span></span> <span data-ttu-id="16be3-132">Klik op **Volgende**.</span><span class="sxs-lookup"><span data-stu-id="16be3-132">Click **Next**.</span></span>

4. <span data-ttu-id="16be3-133">In de **Cmdlet zelfstandig naamwoord** in de lijst met **VM**.</span><span class="sxs-lookup"><span data-stu-id="16be3-133">In the **Cmdlet Noun** list, select **VM**.</span></span> <span data-ttu-id="16be3-134">Klik op **Volgende**</span><span class="sxs-lookup"><span data-stu-id="16be3-134">Click **Next**</span></span>

5. <span data-ttu-id="16be3-135">In dit voorbeeld gekoppeld we alleen de Get en Delete-opdrachten met cmdlets.</span><span class="sxs-lookup"><span data-stu-id="16be3-135">For this example, we will bind only the Get and Delete commands with cmdlets.</span></span> <span data-ttu-id="16be3-136">Schakel de **maken** en **UPDATE** selectievakjes, en zorg ervoor dat de **ophalen** en **verwijderen** selectievakjes zijn geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="16be3-136">Clear the **CREATE** and **UPDATE** checkboxes, and make sure the **GET** and **DELETE** checkboxes are checked.</span></span> <span data-ttu-id="16be3-137">Zorg ervoor dat de `Get-VM` cmdlet is geselecteerd voor **ophalen**, en de `Remove-VM` cmdlet is geselecteerd voor **verwijderen**.</span><span class="sxs-lookup"><span data-stu-id="16be3-137">Make sure that the `Get-VM` cmdlet is selected for **GET**, and the `Remove-VM` cmdlet is selected for **DELETE**.</span></span>

6. <span data-ttu-id="16be3-138">Omdat de metagegevens voor de VM-cmdlets een uitvoertype niet is opgegeven, moet u de cmdlet om op te geven van het uitvoertype uitvoeren.</span><span class="sxs-lookup"><span data-stu-id="16be3-138">Because the metadata for the VM cmdlets does not specify an output type, you will need to run the cmdlet to specify the output type.</span></span> <span data-ttu-id="16be3-139">Selecteer **Geef uitvoertype** en klikt u op **cmdlet uitvoeren**.</span><span class="sxs-lookup"><span data-stu-id="16be3-139">Select **Provide output type** and click **Run cmdlet**.</span></span> <span data-ttu-id="16be3-140">De **Cmdlet uitvoeren** dialoogvenster wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="16be3-140">The **Run Cmdlet** dialog appears.</span></span> <span data-ttu-id="16be3-141">Klik op **Run**.</span><span class="sxs-lookup"><span data-stu-id="16be3-141">Click **Run**.</span></span> <span data-ttu-id="16be3-142">De **CLR-Type** vak wordt gevuld met de `VirtualMachine` type.</span><span class="sxs-lookup"><span data-stu-id="16be3-142">The **CLR Type** box is populated with the `VirtualMachine` type.</span></span> <span data-ttu-id="16be3-143">Klik op **OK**, klikt u vervolgens op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="16be3-143">Click **OK**, then click **Next**.</span></span>

7. <span data-ttu-id="16be3-144">Alle van de eigenschappen van het object VirtualMachine zijn standaard geselecteerd.</span><span class="sxs-lookup"><span data-stu-id="16be3-144">By default, all of the properties of the VirtualMachine object are selected.</span></span> <span data-ttu-id="16be3-145">U kunt alle eigenschappen die u niet als onderdeel van de gegevens die worden geretourneerd wanneer u deze resource bij de webservice aanvragen wilt wissen.</span><span class="sxs-lookup"><span data-stu-id="16be3-145">You can clear any properties that you do not want as part of the data returned when you request this resource from the web service.</span></span> <span data-ttu-id="16be3-146">Klik op **Volgende**.</span><span class="sxs-lookup"><span data-stu-id="16be3-146">Click **Next**.</span></span>

8. <span data-ttu-id="16be3-147">U moet ten minste één eigenschap moet worden gebruikt als een sleutel selecteren.</span><span class="sxs-lookup"><span data-stu-id="16be3-147">You must select at least one property to be used as a key.</span></span> <span data-ttu-id="16be3-148">Selecteer **naam** in de lijst en klikt u op **volgende**.</span><span class="sxs-lookup"><span data-stu-id="16be3-148">Select **Name** in the list, and click **Next**.</span></span>

9. <span data-ttu-id="16be3-149">Het volgende venster kunt u eigenschappen van de Management OData-resource toewijzen aan eigenschappen van de onderliggende-cmdlets.</span><span class="sxs-lookup"><span data-stu-id="16be3-149">The next window allows you to map properties of the Management OData resource to properties of the underlying cmdlets.</span></span> <span data-ttu-id="16be3-150">De wizard worden eigenschappen met dezelfde naam standaard toegewezen.</span><span class="sxs-lookup"><span data-stu-id="16be3-150">The wizard maps properties with identical names by default.</span></span> <span data-ttu-id="16be3-151">Bijvoorbeeld, de `ComputerName` eigenschap van de resource is toegewezen aan de `ComputerName` eigenschap van de cmdlets.</span><span class="sxs-lookup"><span data-stu-id="16be3-151">For example, the `ComputerName` property of the resource is mapped to the `ComputerName` property of the cmdlets.</span></span>  <span data-ttu-id="16be3-152">Hiermee kunt u om op te geven de `ComputerName` eigenschap in een aanvraag naar de webservice, en hebben de waarde die u opgeeft worden doorgegeven aan de `Get-VM` cmdlet.</span><span class="sxs-lookup"><span data-stu-id="16be3-152">This allows you to specify the `ComputerName` property in a request to the web service, and have the value you specify be passed to the `Get-VM` cmdlet.</span></span> <span data-ttu-id="16be3-153">`Id` en `Name` ook standaard worden toegewezen.</span><span class="sxs-lookup"><span data-stu-id="16be3-153">`Id` and `Name` are also mapped by default.</span></span>

   10. <span data-ttu-id="16be3-154">Klik op **volgende**, klikt u vervolgens op **voltooien**.</span><span class="sxs-lookup"><span data-stu-id="16be3-154">Click **Next**, then click **Finish**.</span></span>

       <span data-ttu-id="16be3-155">De VM-resource wordt nu weergegeven in het ontwerpfunctievenster schema.</span><span class="sxs-lookup"><span data-stu-id="16be3-155">The VM resource now appears in the schema designer window.</span></span> <span data-ttu-id="16be3-156">U kunt de eigenschappen en bewerkingen die zijn gekoppeld aan de bron controleren.</span><span class="sxs-lookup"><span data-stu-id="16be3-156">You can examine the properties and operations associated with the resource.</span></span> <span data-ttu-id="16be3-157">U wordt vervolgens de schemabestanden bijgewerkt exporteren naar de virtuele map voor de webservice.</span><span class="sxs-lookup"><span data-stu-id="16be3-157">Next, you will export the updated schema files into the virtual directory for the web service.</span></span>

#### <a name="exporting-schema-files-from-the-schema-designer"></a><span data-ttu-id="16be3-158">Schema-bestanden exporteren vanuit de ontwerpfunctie voor schema</span><span class="sxs-lookup"><span data-stu-id="16be3-158">Exporting schema files from the schema designer</span></span>

1. <span data-ttu-id="16be3-159">Met de rechtermuisknop op een leeg gebied in het ontwerpfunctievenster schema, en klikt u op **schemabestand** ; **Exporteren**.</span><span class="sxs-lookup"><span data-stu-id="16be3-159">Right-click on a blank area of the schema designer window, and click **Schema file** ; **Export**.</span></span> <span data-ttu-id="16be3-160">De **OpslaanAls** dialoogvenster wordt weergegeven.</span><span class="sxs-lookup"><span data-stu-id="16be3-160">The **Save As** dialog appears.</span></span>

2. <span data-ttu-id="16be3-161">Navigeer naar dezelfde map waar u het MOF-bestand geïmporteerd.</span><span class="sxs-lookup"><span data-stu-id="16be3-161">Navigate to the same directory from where you imported the MOF file.</span></span> <span data-ttu-id="16be3-162">Noem het bestand gelijk zijn aan het oorspronkelijke MOF-bestand (Schema.mof standaard), en klikt u op **opslaan**.</span><span class="sxs-lookup"><span data-stu-id="16be3-162">Name the file the same as the original MOF file (Schema.mof by default), and click **Save**.</span></span> <span data-ttu-id="16be3-163">Bevestig dat u wilt het bestaande bestand overschrijven.</span><span class="sxs-lookup"><span data-stu-id="16be3-163">Confirm that you want to overwrite the existing file.</span></span>

   <span data-ttu-id="16be3-164">Hoewel het niet expliciet is opgegeven de **OpslaanAls** dialoogvenster dit vervangt de Schema.mof en Schema.xml bestanden.</span><span class="sxs-lookup"><span data-stu-id="16be3-164">Although it is not explicitly stated in the **Save As** dialog, this replaces both the Schema.mof and Schema.xml files.</span></span>

## <a name="next-steps"></a><span data-ttu-id="16be3-165">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="16be3-165">Next Steps</span></span>

<span data-ttu-id="16be3-166">Voordat u toegang krijgt de nieuwe VM-resource van het Management OData-webservice tot, moet u het bestand RbacConfiguration.xml voor toegang tot de Hyper-V Windows PowerShell-module zoals beschreven in bijwerken [autorisatie op basis van rollen configureren](./configuring-role-based-authorization.md), en moet u ook de webservice opnieuw te starten.</span><span class="sxs-lookup"><span data-stu-id="16be3-166">Before you access the new VM resource from the Management OData web service, you must update the RbacConfiguration.xml file to allow access to the Hyper-V Windows PowerShell module as described in [Configuring Role-based Authorization](./configuring-role-based-authorization.md), and you will also need to restart the web service.</span></span>